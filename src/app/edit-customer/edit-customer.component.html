<div class="popup-container">
  <div class="popup-header">
    <h1 style="color: var(--banka-white)">Add New Customer</h1>
    <button class="closeBtn" (click)="cancel()">X</button>
  </div>
  <hr style="background-color: black; margin-top: 0; height: 1px;">

  <div class="popup-body">
    <div class="form-container">
      <div class="left-section">
        <div class="form-group">
          <label for="email">Email:</label>
          <input type="text" id="email" [(ngModel)]="editCustomerData.email" name="email" required #emailModel="ngModel" required pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$" [ngClass]="{ 'invalid-input': emailModel.invalid && (emailModel.dirty || emailModel.touched) }"/>
          <div *ngIf="emailModel.invalid && (emailModel.dirty || emailModel.touched)" class="error-message">
            <div *ngIf="emailModel.hasError('required')" style="color: red;">Email is required.</div>
            <div *ngIf="emailModel.hasError('pattern')" style="color: red;">Invalid email format.</div>
          </div>
        </div>

        <div class="form-group">
          <label for="name">Name:</label>
          <input type="text" id="name" [(ngModel)]="editCustomerData.firstName" name="name" required pattern="[a-zA-Z]+" required #nameModel="ngModel" [ngClass]="{ 'invalid-input': nameModel.invalid && (nameModel.dirty || nameModel.touched) }" />
          <div *ngIf="nameModel.invalid && (nameModel.dirty || nameModel.touched)" class="error-message">
            <div *ngIf="nameModel.hasError('required')" style="color: red;">Name is required.</div>
            <div *ngIf="nameModel.hasError('pattern')" style="color: red;">Name must contain only letters.</div>
          </div>
        </div>

        <div class="form-group">
          <label for="surname">LastName:</label>
          <input type="text" id="surname" [(ngModel)]="editCustomerData.lastName" name="surname" required #surnameModel="ngModel" required pattern="[a-zA-Z]+" [ngClass]="{ 'invalid-input': surnameModel.invalid && (surnameModel.dirty || surnameModel.touched) }"/>
          <div *ngIf="surnameModel.invalid && (surnameModel.dirty || surnameModel.touched)" class="error-message">
            <div *ngIf="surnameModel.hasError('required')" style="color: red;">Surname is required.</div>
            <div *ngIf="surnameModel.hasError('pattern')" style="color: red;">Last name must contain only letters.</div>
          </div>
        </div>

        <div class="form-group">
          <label for="address">Address:</label>
          <input type="text" id="address" [(ngModel)]="editCustomerData.address" name="address" required #addressModel="ngModel" required [ngClass]="{ 'invalid-input': addressModel.invalid && (addressModel.dirty || addressModel.touched) }"/>
          <div *ngIf="addressModel.invalid && (addressModel.dirty || addressModel.touched)" class="error-message">
            <div *ngIf="addressModel.hasError('required')" style="color: red;">Address is required.</div>
          </div>
        </div>

      </div>


      <div class="right-section">
        <div class="form-group">
          <label for="phone">Phone Number:</label>
          <input type="text" id="phone" [(ngModel)]="editCustomerData.phoneNumber" name="phone" required pattern="^\d+$" #phoneModel="ngModel" [ngClass]="{ 'invalid-input': phoneModel.invalid && (phoneModel.dirty || phoneModel.touched) }"/>
          <div *ngIf="phoneModel.invalid && (phoneModel.dirty || phoneModel.touched)" class="error-message">
            <div *ngIf="phoneModel.hasError('required')" style="color: red;">Phone Number is required.</div>
            <div *ngIf="phoneModel.hasError('pattern')" style="color: red;">Invalid Phone Number format (must contain only digits).</div>
          </div>
        </div>


        <div class="form-group">
          <label for="jmbg">JMBG:</label>
          <input type="text"
                 id="jmbg"
                 [(ngModel)]="editCustomerData.jmbg"
                 name="jmbg"
                 required
                 pattern="^\d{13}$"
                 #jmbgModel="ngModel"
                 [readonly]="isJmbgReadonly()"
                 (input)="onInputChange($event)"
                 [ngClass]="{ 'invalid-input': jmbgModel.invalid && (jmbgModel.dirty || jmbgModel.touched) }"/>

          <div *ngIf="jmbgModel.invalid && (jmbgModel.dirty || jmbgModel.touched)" class="error-message">
            <div *ngIf="jmbgModel.hasError('required')" style="color: red;">JMBG is required.</div>
            <div *ngIf="jmbgModel.hasError('pattern')" style="color: red;">Invalid JMBG format (must be 13 digits).</div>
          </div>


        </div>


        <div class="form-group">
          <label for="position">Position:</label>
          <input type="text" name="position" value="customer" readonly>
        </div>

        <div class="form-group">
          <label>Gender:</label>
          <dropdown-input [initialValue]="editCustomerData.gender"  [inputName]="'gender'" [valueNames]="['Male', 'Female']" [values]="['Male', 'Female']" (selectedValue)="setGender($event)"></dropdown-input>
        </div>
        <!--              <dropdown-selector [config]="dropdownConfig"-->
        <!--                                     (selectionChanged)="updateUid($event)">-->
        <!--              </dropdown-selector>-->

        <div class="bottom-buttons">
          <outline-orange-button [buttonName]="'Cancel'" (click)="cancel()"></outline-orange-button>
          <orange-button [buttonName]="'Create'" (click)="submit()"></orange-button>
        </div>

      </div>
    </div>
  </div>
</div>
